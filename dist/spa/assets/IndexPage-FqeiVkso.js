import{t as m,g as y,v as h,e as l,z as x,u,A as w,C as p,G as v,x as b,a as M,I as C,J as g,L as k,N as R}from"./index-CCBP_0Fg.js";import{a as T}from"./render-pc5bUQKw.js";const F=m({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(r,{slots:t}){const{proxy:{$q:e}}=y(),s=u(w,h);if(s===h)return console.error("QPage needs to be a deep child of QLayout"),h;if(u(p,h)===h)return console.error("QPage needs to be child of QPageContainer"),h;const a=l(()=>{const o=(s.header.space===!0?s.header.size:0)+(s.footer.space===!0?s.footer.size:0);if(typeof r.styleFn=="function"){const f=s.isContainer.value===!0?s.containerHeight.value:e.screen.height;return r.styleFn(o,f)}return{minHeight:s.isContainer.value===!0?s.containerHeight.value-o+"px":e.screen.height===0?o!==0?`calc(100vh - ${o}px)`:"100vh":e.screen.height-o+"px"}}),c=l(()=>`q-page${r.padding===!0?" q-layout-padding":""}`);return()=>x("main",{class:c.value,style:a.value},T(t.default))}});class i{constructor(t,e){this.x=t,this.y=e}add(...t){let e=this.x,s=this.y;for(const n of t)typeof n=="number"?(e+=n,s+=n):(e+=n.x,s+=n.y);return new i(e,s)}subtract(...t){let e=this.x,s=this.y;for(const n of t)typeof n=="number"?(e-=n,s-=n):(e-=n.x,s-=n.y);return new i(e,s)}multiply(...t){let e=this.x,s=this.y;for(const n of t)typeof n=="number"?(e*=n,s*=n):(e*=n.x,s*=n.y);return new i(e,s)}divide(...t){let e=this.x,s=this.y;for(const n of t)typeof n=="number"?(e/=n,s/=n):(e/=n.x,s/=n.y);return new i(e,s)}angle(){return this.magnitude()===0?0:Math.atan2(this.y,this.x)*180/Math.PI}angleRadians(){return this.magnitude()===0?0:Math.atan2(this.y,this.x)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}rotate(t){return this.rotateRadians(t*Math.PI/180)}rotateRadians(t){const e=Math.cos(t),s=Math.sin(t);return new i(this.x*e-this.y*s,this.x*s+this.y*e)}floor(t,e){return t===void 0?new i(Math.floor(this.x),Math.floor(this.y)):typeof t=="number"&&e!==void 0?new i(Math.floor(this.x/t)*t,Math.floor(this.y/e)*e):typeof t=="number"?new i(Math.floor(this.x/t)*t,Math.floor(this.y/t)*t):new i(Math.floor(this.x/t.x)*t.x,Math.floor(this.y/t.y)*t.y)}ceil(t,e){return t===void 0?new i(Math.ceil(this.x),Math.ceil(this.y)):typeof t=="number"&&e!==void 0?new i(Math.ceil(this.x/t)*t,Math.ceil(this.y/e)*e):typeof t=="number"?new i(Math.ceil(this.x/t)*t,Math.ceil(this.y/t)*t):new i(Math.ceil(this.x/t.x)*t.x,Math.ceil(this.y/t.y)*t.y)}clamp(t,e){if(typeof t=="number"&&typeof e=="number")return new i(Math.max(t,Math.min(e,this.x)),Math.max(t,Math.min(e,this.y)));if(t instanceof i&&e instanceof i)return new i(Math.max(t.x,Math.min(e.x,this.x)),Math.max(t.y,Math.min(e.y,this.y)));throw new Error("Invalid clamp arguments: both min and max must be either numbers or Vector2 objects")}clampMagnitude(t){return this.magnitude()>t?this.normalise().multiply(t):this}clone(){return new i(this.x,this.y)}dot(t){return this.x*t.x+this.y*t.y}lerp(t,e){return new i(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}moveTowards(t,e){return this.add(t.subtract(this).clampMagnitude(e))}normalise(){const t=this.magnitude();return t===0?new i(0,0):new i(this.x/t,this.y/t)}flip(){return new i(-this.x,-this.y)}flipx(){return new i(-this.x,this.y)}flipy(){return new i(this.x,-this.y)}round(t,e){const s=(n,a)=>{const c=Math.pow(10,a);return Math.round(n*c)/c};return t===void 0?new i(s(this.x,2),s(this.y,2)):typeof t=="number"&&e!==void 0?new i(s(this.x,t),s(this.y,e)):typeof t=="number"?new i(s(this.x,t),s(this.y,t)):new i(s(this.x,t.x),s(this.y,t.y))}stringSize(){return`${this.x}px ${this.y}px`}equals(t){return this.x===t.x&&this.y===t.y}}class P{cvs;ctx;constructor(t){this.cvs=t,this.cvs.width=window.innerWidth,this.cvs.height=window.innerHeight,this.cvs.style.width=window.innerWidth+"px",this.cvs.style.height=window.innerHeight+"px",this.ctx=this.cvs.getContext("2d"),window.addEventListener("resize",this.resize.bind(this))}resize(){const t=window.innerWidth,e=window.innerHeight;this.cvs.width=t,this.cvs.height=e,this.cvs.style.width=t+"px",this.cvs.style.height=e+"px",$.container=new i(t,e)}save(){this.ctx.save()}restore(){this.ctx.restore()}move(t){this.ctx.translate(t.x,t.y)}scale(t){this.ctx.scale(t.x,t.y)}rotate(t){this.ctx.rotate(t)}clear(){this.ctx.clearRect(0,0,this.cvs.width,this.cvs.height)}}class I{_position=new i(0,0);_rotation=0;_scale=new i(1,1);_anchor=new i(0,0);constructor(){}get position(){return this._position.clone()}setPosition(t,e){return typeof t=="number"?this._position=new i(t,e??t):this._position=t.clone(),this}move(t){return this._position=this._position.add(t),this}get rotation(){return this._rotation}setRotation(t){return this._rotation=t,this}rotate(t){return this._rotation=this._rotation+t,this}get scale(){return this._scale.clone()}setScale(t){return typeof t=="number"?this._scale=new i(t,t):this._scale=t.clone(),this}get anchor(){return this._anchor.clone()}setAnchor(t){return this._anchor=t.clone(),this}apply(t){}}class d{below={};children={};above={};parent;_order=1;get order(){return this._order}set order(t){this._order=t}transform;constructor(){this.transform=new I}add(t,e,s=1){if(e.children[t])throw new Error(`Child ${t} already exists`);if(e.children[t]=this,s<0)e.below[t]=this,e.below=Object.fromEntries(Object.entries(e.below).sort((n,a)=>n[1].order-a[1].order));else if(s>0)e.above[t]=this,e.above=Object.fromEntries(Object.entries(e.above).sort((n,a)=>n[1].order-a[1].order));else throw new Error("Order must be less than 0 or greater than 0");this.parent=e,this.order=s}preTransform(){}preRender(){}render(){}postRender(){}tick(){$.canvas.save(),this.preTransform(),this.transform.apply($.canvas.ctx),this.preRender();for(const t of Object.values(this.below))t.tick();this.render();for(const t of Object.values(this.above))t.tick();this.postRender(),$.canvas.restore()}}class S{animationFrameId=null;callbacks=new Set;startTime=0;lastFrameTime=0;frameCount=0;isRunning=!1;start(){this.isRunning||(this.isRunning=!0,this.startTime=performance.now(),this.lastFrameTime=this.startTime,this.frameCount=0,this.tick())}stop(){this.isRunning&&(this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null))}addCallback(t){this.callbacks.add(t)}removeCallback(t){this.callbacks.delete(t)}clearCallbacks(){this.callbacks.clear()}get currentFPS(){if(!this.isRunning||this.frameCount===0)return 0;const t=(performance.now()-this.startTime)/1e3;return this.frameCount/t}get running(){return this.isRunning}get currentFrameCount(){return this.frameCount}get elapsedTime(){return this.isRunning?performance.now()-this.startTime:0}tick(){if(!this.isRunning)return;const t=performance.now(),e=t-this.lastFrameTime,s=t-this.startTime;this.frameCount++,this.lastFrameTime=t,this.callbacks.forEach(n=>{n({deltaTime:e,elapsedTime:s,frameCount:this.frameCount})}),this.animationFrameId=requestAnimationFrame(()=>{this.tick()})}}class j extends d{ticker;constructor(t){super(),window.$={game:this,canvas:new P(t),tick:{deltaTime:0,elapsedTime:0,frameCount:0},container:new i(t.width,t.height)},this.ticker=new S,this.ticker.addCallback(e=>{$.tick=e,this.tick()})}preRender(){$.canvas.clear()}start(){this.ticker.start()}}class E extends d{constructor(){super(),this.transform.setPosition(new i(100,100)),this.transform.setAnchor(new i(1e3,50))}preRender(){$.canvas.rotate($.tick.elapsedTime*.001)}render(){$.canvas.ctx.fillStyle="blue",$.canvas.ctx.fillRect(0,0,100,100)}}class z extends j{constructor(t){super(t),new E().add("child",this)}render(){$.canvas.ctx.fillStyle="red",$.canvas.ctx.fillRect(0,0,$.container.x,$.container.y)}}const H=v({__name:"IndexPage",setup(r){const t=b(null);return M(()=>{t.value&&new z(t.value).ticker.start()}),(e,s)=>(k(),C(F,{class:""},{default:g(()=>[R("canvas",{ref_key:"canvasRef",ref:t},null,512)]),_:1}))}});export{H as default};
